function cybs_dfprofiler(e,t){if("live"===t.toLowerCase())n="k8vif92e";else var n="1snn5n9w";var i=(new Date).getTime(),d=document.createElement("p");str="background:url(https://h.online-metrix.net/fp/clear.png?org_id="+n+"&session_id="+e+i+"&m=1)",d.styleSheets=str,d.height="0",d.width="0",d.hidden="true",document.body.appendChild(d);var r=document.createElement("img");str="https://h.online-metrix.net/fp/clear.png?org_id="+n+"&session_id="+e+i+"&m=2",r.src=str,document.body.appendChild(r);var s=document.createElement("script");s.src="https://h.online-metrix.net/fp/check.js?org_id="+n+"&session_id="+e+i,s.type="text/javascript",document.body.appendChild(s);var o=document.createElement("object");o.data="https://h.online-metrix.net/fp/fp.swf?org_id="+n+"&session_id="+e+i,o.width="1",o.height="1",o.id="thm_fp";var p=document.createElement("param");return p.name="movie",p.value="https://h.online-metrix.net/fp/fp.swf?org_id="+n+"&session_id="+e+i,o.appendChild(p),document.body.appendChild(o),i}
function onPromoClick(e,o,a,r){return dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:e,name:o,creative:a,position:r}]}}}),!0}function clicProducto(e,o){var a=JSON.parse(e);return dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:o},products:[{name:a.producto,id:a.id,price:a.precio,brand:a.marca,category:a.categoria,affiliation:a.tienda,position:a.posicion}]}}}),!0}function onCheckout(e){return dataLayer.push({event:"checkout",ecommerce:{checkout:{actionField:{step:1,option:"Web"},products:e}}}),!0}function promoView(e){""!==e&&dataLayer.push({event:"promoView",ecommerce:{promoView:{promotions:e}}})}function productListView(e){""!==e&&(dataLayer.push({ecommerce:{currencyCode:"MXN",impressions:e}}),console.log(e))}function agregarProductoCarrito(){var e=document.compra;console.log(e);var o=e.nombre.value,a=e.id.value,r=e.precio.value,n=e.marca.value,t=e.categoria.value,c=e.tienda.value,i=parseInt(e.c.value),u=e.num_parte.value;return dataLayer.push({event:"agregarProductoCarrito",ecommerce:{currencyCode:"MXN",add:{products:[{name:o,id:a,price:r,brand:n,category:t,affiliation:c,quantity:i,dimension7:r,dimension8:u}]}}}),!0}function oneclick(){return dataLayer.push({event:"botonOneClick",eventAction:"click",eventCategory:"UX",eventLabel:"oneclick"}),!0}var sendAddToCart=function(e){var o=e.nombre.value,a=e.id.value,r=e.precio.value,n=e.marca.value,t=e.categoria.value,c=e.tienda.value,i=parseInt(e.c.value),u=e.num_parte.value;return dataLayer.push({event:"addToCart",ecommerce:{currencyCode:"MXN",add:{products:[{name:o,id:a,price:r,brand:n,category:t,affiliation:c,quantity:i,dimension7:r,dimension8:u}]}}}),!0};
function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function onLogoutHandler(e){$.ajax({type:"POST",url:"/mi-cuenta/social-login/ini.php",data:"action=logoff",dataType:"json",success:function(e){"ERROR"===e.returnVal?$("#reg_error").text(e.error):window.location.reload()}})}var defaultUserAction=new gigya.services.socialize.UserAction;defaultUserAction.setTitle(document.title),defaultUserAction.setLinkBack(window.location);var showShareBarUI_params={containerID:"gig-share",shareButtons:"Facebook-Like,Twitter-Tweet,googleplus-share,Pinterest,Share",showCounts:"none",iconsOnly:"true",userAction:defaultUserAction};$(document).ready(function(){$("#login").click(function(){if(loading(!0),validarFormulario("formRegister"),!validateEmail($("#loginEmail").val()))return $("#loginMessage").text("Por favor ingresa un correo electrónico válido"),$("#loginMessage").show(),loading(!1),!1;if(null==$("#loginPassword").val()||""==$("#loginPassword").val())return $("#loginMessage").text("Por favor ingresa tu password"),$("#loginMessage").show(),loading(!1),!1;var e={tkn_login:$("input[name='tkn_login']").val(),email:$("#loginEmail").val(),password:$("#loginPassword").val(),redirect:$("#redirect").val(),recordar:$("#recordar_usuario").is(":checked")?1:0,action:"login"};return $("#loginMessage").hide(),$.ajax({type:"POST",url:"/mi-cuenta/social-login/ini.php",data:e,dataType:"json",success:function(e){switch(e.returnVal){case"SUCCESS":case"REVIEW":window.location.href=e.redirect;break;default:$("#loginMessage").text(e.error),$("#loginMessage").show(),loading(!1)}}}),!1}),$("#register").click(function(){if(loading(!0),validarFormulario("formRegister"),!validateEmail($("#email").val()))return $("#registrationMessage").text("Por favor ingresa un correo electrónico válido"),$("#registrationMessage").show(),loading(!1),!1;if(null==$("#password").val()||""==$("#password").val()||null==$("#repassword").val()||""==$("#repassword").val())return $("#registrationMessage").text("Por favor ingresa tu password"),$("#registrationMessage").show(),loading(!1),!1;if($("#password").val()!=$("#repassword").val())return $("#registrationMessage").text("El password y el password de verificación no son iguales"),$("#registrationMessage").show(),loading(!1),!1;if(null==$("#firstnameReg").val()||""==$("#firstnameReg").val())return $("#registrationMessage").text("Por favor ingresa tu nombre"),$("#registrationMessage").show(),loading(!1),!1;if(null==$("#lastnameReg").val()||""==$("#lastnameReg").val())return $("#registrationMessage").text("Por favor ingresa tu apellido"),$("#registrationMessage").show(),loading(!1),!1;if(null==$("#lastnameMReg").val()||""==$("#lastnameMReg").val())return $("#registrationMessage").text("Por favor ingresa tu apellido"),$("#registrationMessage").show(),loading(!1),!1;if(null==$("#lastnameMReg").val()||""==$("#lastnameMReg").val())return $("#registrationMessage").text("Por favor ingresa tu apellido"),$("#registrationMessage").show(),loading(!1),!1;if(!$("#chk_terminos_politica").is(":checked")||!$("#chk_terminos_politica").prop("checked"))return $("#registrationMessage").text("Debes aceptar los terminos, condiciones y políticas de privacidad"),$("#registrationMessage").show(),loading(!1),!1;var e={email:$("#email").val(),password:$("#password").val(),firstname:$("#firstnameReg").val(),lastname:$("#lastnameReg").val(),lastnameM:$("#lastnameMReg").val(),ofertas:$("#chk_ofertas").is(":checked")?"on":"off",puntossinfin:$("#chk_puntossinfin").is(":checked")?"on":"off",privacidad:$("#chk_privacidad").val(),terminos_politicas:$("#chk_terminos_politica").val(),action:"register",redirect:$("#redirect").val()};return $("#registrationMessage").text(""),$("#registrationMessage").hide(),$.ajax({type:"POST",url:"/registrate/recibe",data:e,dataType:"json",success:function(e){switch(e.returnVal){case"SUCCESS":window.location.href=e.redirect;break;case"EMAIL_NOT_UNIQUE":loading(!1),$("#registrationMessage").text("El correo electrónico que usted ha proporcionado ya existe en nuestro sistema."),$("#registrationMessage").show();break;default:loading(!1),$("#registrationMessage").text("Error: "+e.error),$("#registrationMessage").show()}}}),!1}),$("#linkAccount").click(function(){if(!validateEmail($("#linkEmail").val()))return $("#linkMessage").text("Por favor ingresa un email"),!1;if(null==$("#linkPassword").val()||""==$("#linkPassword").val())return $("#linkMessage").text("Por favor ingresa un password"),!1;var e={tkn_login:$("input[name='tkn_login']").val(),email:$("#linkEmail").val(),password:$("#linkPassword").val(),action:"linkAccounts"};return $.ajax({type:"POST",url:"/mi-cuenta/social-login/ini.php",data:e,dataType:"json",success:function(e){switch(e.returnVal){case"SUCCESS":window.location.href="/mi-cuenta/";break;default:loading(!1),alert(e.error)}}}),!1}),$("#provideEmail").on("click",function(){if(console.log($(this).text()),!validateEmail($("#missingEmail").val()))return $("#provideEmailMessage").text("Please enter a valid e-mail address"),$("#provideEmailMessage").show(),!1;var e={loginEmail:$("#missingEmail").val(),action:"provideEmail"};return $("#provideEmailMessage").text(""),$("#provideEmailMessage").hide(),$.ajax({type:"POST",url:"/mi-cuenta/social-login/ini.php",data:e,dataType:"json",success:function(e){switch(e.returnVal){case"SUCCESS":window.location.href="/mi-cuenta/";break;case"EMAIL_NOT_UNIQUE":loading(!1),$("#provideEmailMessage").html("El email ya se encuentra registrado en Claroshop. Por favor ingresa otro correo electrónico o haz clic aqui para <a href='/mi-cuenta/iniciar-sesion/enlazar-cuentas.php'>enlazar tus cuentas</a>. "),$("#provideEmailMessage").show();break;default:loading(!1),$("#provideEmailMessage").text("Regsitration Failed. Error message: "+e.error),$("#provideEmailMessage").show()}}}),!1})}),$(document).ready(function(){gigya.socialize.addEventHandlers({onLogin:onLoginHandler,onLogout:onLogoutHandler});var e={height:255,width:325,showTermsLink:!1,hideGigyaLink:!0,showWhatsThis:!1,UIConfig:'<config><body><controls><snbuttons buttonsize="35" /></controls></body></config>',buttonsStyle:"signInWith"};e.containerID="loginPluginDiv",gigya.socialize.showLoginUI(e),e.containerID="loginPluginRegisterDiv",gigya.socialize.showLoginUI(e)});var onLoginHandler=function(e){console.log(e);var a=window.location,i={userObject:e,action:"socialLogin",urlActual:a.search};try{loading(!0),$.post("/mi-cuenta/social-login/ini.php",i,function(a){switch(console.log(a),a.returnVal){case"ERROR":console.log("Gigya Login error : "+a.error);break;case"SUCCESS":window.location.href=a.redirect,"facebook"===e.provider&&$("#cooked").show();break;case"MISSING_EMAIL":window.location="/mi-cuenta/iniciar-sesion/solicitar-email.php";break;case"EMAIL_NOT_UNIQUE":window.location="/mi-cuenta/iniciar-sesion/enlazar-cuentas.php";break;default:alert("default, onLoginHandler: "+a.success)}},"json")}catch(e){console.log(e),loading(!1)}return!1};
var sepomex=function(e,n){var o=$("#"+n).serializeArray();if(o.action="cp",parseInt(e)&&5===e.length){var a;loading(!0),$.ajax({async:!0,type:"POST",dataType:"JSON",url:"/sepomex.php",data:o,success:function(e){e.estado.length>0?document.getElementById("estado").value=e.estado[0].d_estado:(a=document.getElementById("estado").value="",alert("En nuestros registros no encontramos tu cp, intenta con otro"),document.getElementById("cpostal").value="");var n=document.getElementById("estado").value;changeEstadoSepomex(n),$("#colonia").removeAttr("disabled"),$("#estado").removeAttr("disabled"),$("#municipio").removeAttr("disabled"),$("#ciudad").removeAttr("disabled"),loading(!1)},timeout:1e6,error:problemas})}loading(!1)},changeEstadoSepomex=function(e){d=document.getElementById("cpostal").value;var n="";if(d.length>=5){var o={cpostal:d,estado:e,action:"estado"};$.ajax({async:!0,type:"POST",dataType:"JSON",url:"/sepomex.php",data:o,success:function(e){$("#municipioContainer span").remove(""),$("#municipio").remove(),e.municipios.length>0?($("#municipioContainer").append("<span class=\"select\"><select name='municipio' onchange='removeMunicipioCombo(this);' id='municipio' required='required'></select></span>"),$.each(e.municipios,function(e,o){n+="<option value='"+o.d_mnpio+"'>"+o.d_mnpio+"</option>"}),n+="<option value='none'> Me gustaría escribirla por mi mismo.</option>",$("#municipio").html(""),$("#municipio").html(n)):($("#municipioContainer span").remove(),$("#municipioContainer").append("<input type='text' maxlength='35' name='municipio' id='municipio' value='' />")),$("#coloniaContainer span").remove(""),$("#colonia").remove(),e.colonia.length>0?($("#coloniaContainer").append("<span class=\"select\"><select name='colonia' onchange='removeContainer(this);' id='colonia' required='required'></select></span>"),n="",$.each(e.colonia,function(e,o){n+="<option value='"+o.d_asenta+"'>"+o.d_asenta+"</option>"}),n+="<option value='none'> Me gustaría escribirla por mi mismo.</option>",$("#colonia").html(""),$("#colonia").html(n)):($("#coloniaContainer span").remove(),$("#coloniaContainer").append("<input type='text' maxlength='35' name='colonia' id='colonia' value='' />"));var o=document.getElementById("ciudad");e.colonia.length>0?o.value=e.ciudad.d_ciudad:o.value=""},timeout:1e6,error:problemas})}return!0},removeContainer=function(e){var n,o;"none"===e.value&&(o=(n=$(e).parent()).parent(),n.remove(),o.append("<input type='text' name='colonia' id='colonia' value='' pattern='.{5,50}' maxlength=\"50\" minlength=\"5\" required/>"))},removeMunicipioCombo=function(e){var n,o;"none"===e.value&&(o=(n=$(e).parent()).parent(),n.remove(),o.append("<input type='text' name='municipio' id='municipio' value='' pattern='.{5,50}' maxlength=\"50\" minlength=\"5\" required/>"))},problemas=function(){return console.log("Errores en conexion"),!1};
function number_format(n,r,e,t){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+n)?+n:0,a=isFinite(+r)?Math.abs(r):0,o=void 0===t?",":t,u=void 0===e?".":e,f="";return(f=(a?function(n,r){var e=Math.pow(10,r);return""+Math.round(n*e)/e}(i,a):""+Math.round(i)).split("."))[0].length>3&&(f[0]=f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(f[1]||"").length<a&&(f[1]=f[1]||"",f[1]+=new Array(a-f[1].length+1).join("0")),f.join(u)}function in_array(n,r,e){var t="";if(!!e){for(t in r)if(r[t]===n)return!0}else for(t in r)if(r[t]===n)return!0;return!1}function functiontofindIndexByKeyValue(n,r,e){for(var t=0;t<n.length;t++)if(n[t][r]==e)return t;return null}function getFormData(n){var r=n.serializeArray(),e={};return $.map(r,function(n,r){e[n.name]=n.value}),e}var transformJSON=function(n){var r=$("#"+n).serializeObject();return console.log(r),r};
function Chatea(){var o=window.open("https://www.telvistaservices.com.mx/des/ClaroshopCode/Clientesweb/claroshop/Default.aspx?Department=3030","name","height=530,width=395,directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no");window.focus&&o.focus()}
function is_0_valid(){if(count=0,document.ProfileForm.optin&&document.ProfileForm.optin.checked&&document.getElementsByName("interest[]")&&document.getElementsByName("interest[]").length>0){for(Interest=document.getElementsByName("interest[]"),i=0;i<Interest.length;i++)Interest[i].checked&&++count;if(0==count)return error+="Intereses:",!1}return!0}function is_3_valid(e){if(""==e)return error+="Correo electrónico: !\n",!1;var r=/^(.+)@(.+)$/,n=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/,t='[^\\s\\(\\)<>@,;:\\\\\\"\\.\\[\\]]+',i="("+t+'|("[^"]*"))',o=new RegExp("^"+i+"(\\."+i+")*$"),u=new RegExp("^"+t+"(\\."+t+")*$"),l=e.match(r);if(null==l)return error+="E-Mail: \n",!1;var m=l[1],c=l[2];if(null==m.match(o))return error+="E-Mail: \n",!1;var a=c.match(n);if(null!=a){for(var f=1;f<=4;f++)if(a[f]>255)return error+="E-Mail: \n",!1;return!0}if(null==c.match(u))return error+="E-Mail: \n",!1;var s=new RegExp(t,"g");return!(c.match(s).length<2)||(error+="E-Mail: \n",!1)}function CheckInputs(){var e=!0;return error="!\n",e=is_0_valid("null")&&e,0==(e=is_3_valid(document.ProfileForm.inp_3.value)&&e)&&alert(error),e}function SubmitIt(){1==CheckInputs()&&(window.onbeforesubmit&&onbeforesubmit(),document.ProfileForm.submit())}function MailIt(){CheckInputs()&&(""==document.ProfileForm.subject.value||""==document.ProfileForm.msg.value?alert("Bitte für Sie die Nachrichtenfelder aus!"):document.ProfileForm.submit())}function FieldWithName(e,r,n){for(n||(n=0),field_count=0,i=0;i<e.elements.length;++i)if(e.elements[i].name==r){if(field_count==n)return e.elements[i];field_count++}}function NumChecked(e,r){var n=0;for(i=0;i<e.elements.length;++i)e.elements[i].name==r&&1==e.elements[i].checked&&++n;return n}function NumSel(e){var r=0;for(i=0;i<e.length;++i)1==e[i].selected&&++r;return r}var error,form_lanuage="es";
function obtenerParamUrl(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]==e)return n[1]}return null}function cambiarParamUrl(e,t,a){var n,o,r,i,c,d;if("object"!=typeof e)return!1;vacio(t)&&(t=window),d=t.location.href,void 0==a&&(a="?"),-1==d.indexOf(a)?(i=d,r=[]):(i=(o=d.split(a))[0],r=o[1].split("&"));for(var s in e){c=!1;for(var l in r)0==r[l].indexOf(s+"=")&&(c=!0,""==e[s]?r.splice(l,1):r[l]=s+"="+e[s]);c||""==e[s]||r.push(s+"="+e[s])}return n=0==r.length?i:i+a+r.join("&"),t.location.href=n,n}function dimensionarVentana(e,t){$("#fancybox-wrap").width(e+10).height(t+10),$("#fancybox-inner").width(e).height(t),$("#fancybox-content").width(e).height(t),$.fancybox.center()}function busqueda(){if("Productos"==$("#searchDropdownBox").html())$("#h_finder").submit();else{var e=$("#q").val();window.location.href="/s/?q="+e}return!0}function valida_puja(e,t,a){if("error"===e)popupSubastaLogin(),(n=document.getElementById("btn_si")).addEventListener("click",function(){envio(t,a)}),document.getElementById("btn_sregistro").addEventListener("click",function(){window.location="/registrate/"});else{popupSubasta();var n=document.getElementById("btn_ssi");n.addEventListener("click",function(){parseInt(document.getElementById("cantidad").value)>0&&"success"===e&&document.frmPuja.submit()})}return!1}function envio(e,t){return window.location.href="/mi-cuenta/iniciar-sesion/?r=s&next="+encodeURIComponent("subasta/"+e+"/"+t+"/"),!1}function close_popup(){return document.getElementById("contain_popup").style.display="none",document.getElementById("contain_popup").empty(),!1}function popupSubasta(){var e=document.getElementById("contain_popup"),t=document.createElement("div");t.setAttribute("class","contSubasta"),e.appendChild(t);var a=document.createElement("div");a.setAttribute("class","cerrar"),a.setAttribute("onclick","close_popup();"),t.appendChild(a);var n=document.createElement("p"),o=document.createTextNode("¿Esta seguro de realizar esta oferta?");n.appendChild(o),t.appendChild(n);var r=document.createElement("div");r.setAttribute("class","subastas-popup-btns"),t.appendChild(r);var i=document.createElement("button");i.setAttribute("class","btn-oferta"),i.setAttribute("id","btn_ssi"),i.setAttribute("type","button"),r.appendChild(i);var c=document.createElement("span"),d=document.createTextNode("SI");c.appendChild(d),i.appendChild(c);var s=document.createElement("button");s.setAttribute("class","btn-oferta"),s.setAttribute("type","button"),s.setAttribute("onclick","close_popup();"),r.appendChild(s);var l=document.createElement("span"),u=document.createTextNode("NO");return l.appendChild(u),s.appendChild(l),document.getElementById("contain_popup").style.display="block",!1}function popupSubastaLogin(){var e=document.getElementById("contain_popup"),t=document.createElement("div");t.setAttribute("class","contSubasta"),e.appendChild(t);var a=document.createElement("div");a.setAttribute("class","cerrar"),a.setAttribute("onclick","close_popup();"),t.appendChild(a);var n=document.createElement("p"),o=document.createTextNode("¿Cuentas con un usuario de Claro shop?");n.appendChild(o),t.appendChild(n);var r=document.createElement("div");r.setAttribute("class","subastas-popup-btns"),t.appendChild(r);var i=document.createElement("button");i.setAttribute("class","btn-rojo"),i.setAttribute("id","btn_si"),i.setAttribute("type","button"),r.appendChild(i);var c=document.createElement("span"),d=document.createTextNode("Iniciar sesion");c.appendChild(d),i.appendChild(c);var s=document.createElement("p"),l=document.createTextNode("Ó si eres nuevo por favor");s.appendChild(l),t.appendChild(s);var u=document.createElement("div");u.setAttribute("class","subastas-popup-btns"),t.appendChild(u);var m=document.createElement("button");m.setAttribute("class","btn-azul"),m.setAttribute("type","button"),m.setAttribute("id","btn_sregistro"),u.appendChild(m);var p=document.createElement("span"),v=document.createTextNode("Registrate");return p.appendChild(v),m.appendChild(p),document.getElementById("contain_popup").style.display="block",!1}function masDireccion(){document.getElementById("nueva_direccion").reset(),document.getElementById("id_dir").value="",$("#form_dpersonales").show(),$("#menosDireccion").toggle(),$("#masDireccion").toggle()}function menosDireccion(){document.getElementById("nueva_direccion").reset(),document.getElementById("id_dir").value="",$("#form_dpersonales").hide(),$("#masDireccion").toggle(),$("#menosDireccion").toggle()}function abrirForm(e){$("#form_agregar_datos"+e).show(),$("#form_abrir"+e).hide()}function guardarDatosFaltantes(e,t){$("#form_mensaje_error"+e).html("");var a=validarNumExt(e);actualizarDatos(e,t,validarCelular(e),a)}function actualizarDatos(e,t,a,n){$.ajax({type:"POST",url:"procesos/?a=7",dataType:"JSON",data:{celular:a,num_ext:n,cliente:t,direccion:e},beforeSend:function(){$("#btnActualizarDatos"+e).hide(),$("#form_mensaje_error"+e).html(procesando)},success:function(e){e.status?window.location=e.href:$(".error").show().text(e.message)}})}function validarNumExt(e){var t=null;return $("#numExtAgregar"+e).length&&((t=$("#numExtAgregar"+e).val()).length<1&&($("#numExtAgregar"+e).focus(),$("#form_mensaje_error"+e).html(error_nulo+"n&uacute;mero exterior."),exit()),$.isNumeric(t)||($("#numExtAgregar"+e).val(""),$("#numExtAgregar"+e).focus(),$("#form_mensaje_error"+e).html(error_nulo+"n&uacute;mero exterior."),exit())),t}function validarCelular(e){var t=null;return $("#celularAgregar"+e).length&&((t=$("#celularAgregar"+e).val()).length<1?($("#celularAgregar"+e).focus(),$("#form_mensaje_error"+e).html(error_nulo+"n&uacute;mero celular."),exit()):isNaN(t)?($("#form_mensaje_error"+e).html(error_entero),exit()):t.length<10?($("#form_mensaje_error"+e).html(error_digitos),exit()):0!=t&&1111111111!=t&&2222222222!=t&&3333333333!=t&&4444444444!=t&&5555555555!=t&&6666666666!=t&&7777777777!=t&&8888888888!=t&&9999999999!=t&&1234567890!=t&&123456789!=t||($("#form_mensaje_error"+e).html(error_numeros_invalidos),exit())),t}function datosPago(e){document.getElementById("descuentos").innerHTML="-$"+e.descuentos,document.getElementById("total_venta").innerHTML="$"+e.total_venta,document.getElementById("costo_envioReal").innerHTML="$"+e.costo_envioReal,e.descuento_compra>0&&(document.getElementById("descuento_compra").innerHTML="$"+e.descuento_compra);for(var t=document.getElementById("productos_comprados"),a="",n=0;n<e.productos.length;n++)a+='<dl class="productoComprar">',void 0!==e.productos[n].regalo?(a+="<dt class='rc_regalo'><span class=\"regalo-icon\"></span>Producto de Regalo</dt>",a+="<dt class='rc_regalo'>"+e.productos[n].nombre+"</dt>"):a+="<dt>"+e.productos[n].nombre+"</dt>",e.productos[n].precio>0&&(a+="<dd>$"+e.productos[n].precio+"</dd>"),void 0!==e.productos[n].regalo?a+='<dt class="rc_cantidad rc_regalo">Cantidad: '+e.productos[n].cantidad+" piezas</dt>":a+='<dt class="rc_cantidad">Cantidad: '+e.productos[n].cantidad+" piezas</dt>",e.productos[n].precioSubtotal>0&&(a+="<dd>$"+e.productos[n].precioSubtotal+"</dd>"),a+="</dl>";t.innerHTML="",t.innerHTML=a;var o=document.getElementById("envio_datos");o.innerHTML="";var r="";r+="<li><span>"+e.envio.nombre+"</span></li>",r+="<li>"+e.envio.direccion+"</li>",r+="<li>"+e.envio.colonia+", CP "+e.envio.cp+"</li>",r+="<li>"+e.envio.ciudad+", "+e.envio.estado+"</li>",r+='<li class="ico-phone">Tel Cel.'+e.envio.celular+"</li>",o.innerHTML=r}function getCategorias(e,t,a,n,o){var r="",i="",c="",d="",s="";a&&""!=a&&(s="/marca/"+a);var l="";n&&""!=n&&(l="/precio/"+n),loading(!0),$.ajax({type:"GET",url:base_path+"categoriaajax/"+e+"/pagina/"+t+"/ordenado/"+o+s+l,dataType:"json",success:function(e){loading(!1),$.each(e.productos,function(e,t){t.descuento>0&&(r='<div class="desc">-%'+t.descuento+"<span>Descuento</span></div>"),t.precio<t.precioLista&&(c="<span>"+t.precioLista+"</span>"),t.financiamiento>0?(i='<p class="pagos">Desde <span>'+t.financiamiento+"</span>",i+='al mes</p><div class="tiendas"><span class="telmex"></span><span class="sears"></span></div>'):i='<p class="pagos">&nbsp;</p><div class="tiendas"><span>&nbsp;</span></div>',d='<article class="card__product">',d+='<a class="descuento" href="'+base_path+"producto/"+t.id+'/" >',d+=r,d+='<div class="contImgProd"><img src="'+t.foto+'"></div>',d+='<p class="producto">'+t.nombre+"</p>",d+='<p class="precio">$'+t.precio,d+=c+"</p>",d+=i+"</p></a></article>",r=i=c="",$("#containerProductos").append(d)}),scrollLoad=!0},error:function(e){loading(!1)}})}function getCategoriaRefresh(e,t,a,n,o,r){var i="";a&&""!=a&&(i="/marca/"+a);var c="";n&&""!=n&&(c="/precio/"+n),location.href=r+"/pagina/"+t+"/ordenado/"+o+i+c}var agregado=!1,vacio=function(e){var t;if(""===e||0===e||"0"===e||null===e||!1===e||void 0===e)return!0;if("object"==typeof e){for(t in e)return!1;return!0}return!1},barraInferior=function(e){var t={id_categoria:e};re;$.ajax({type:"post",url:"/categoria/subcategorias/ini.php",dataType:"json",cache:!1,data:t,success:function(t){$("#submenu_"+e).html("");var a=document.getElementById("submenu_"+e);$.each(t,function(e,t){var n=document.createElement("dl");n.setAttribute("class","g-4");var o=document.createElement("dt"),r=document.createElement("a");r.href="/categoria/"+e+"/"+t.seo+"/";var i=document.createTextNode("Todas las Promociones");r.appendChild(i),o.appendChild(r),n.appendChild(o),a.appendChild(n),Object.keys(t.hijas).length>0&&$.each(t.hijas,function(e,t){var n=document.createElement("dl");n.setAttribute("class","g-4");var o=document.createElement("dt"),r=document.createElement("a");r.href="/categoria/"+e+"/"+t.seo+"/";var i=document.createTextNode(t.nombre);r.appendChild(i),o.appendChild(r),n.appendChild(o),Object.keys(t.hijas).length>0&&$.each(t.hijas,function(e,t){var a=document.createElement("dd"),o=document.createElement("a");o.href="/categoria/"+e+"/"+t.seo+"/";var r=document.createTextNode(t.nombre);o.appendChild(r),a.appendChild(o),n.appendChild(a)}),a.appendChild(n)})})},error:function(){}})},ajaxCarrito=function(){var e="/carrito/procesos/?"+$("#compra").serialize()+"&ajax=1";return $.ajax({type:"get",url:e,dataType:"json",success:function(e){var t=parseInt(e);t>0?($("#cart_count").text(t),$("#cantidadProductos a").attr("href","/carrito/")):($("#cart_count").text(t),$("#cantidadProductos a").attr("href","#")),window.location="/carrito/"},beforeSend:function(){$("body").ScrollTo(500),$("#cart_count").text(""),$("#cantidadProductos a").attr("href","#")},error:function(){}}),!1},ajaxCarritoSolo=function(){return $.ajax({type:"get",url:"/carrito/procesos/?&ajax=1",dataType:"json",success:function(e){var t=parseInt(e);t>0?($("#cart_count").text(t),$("#cart_count2").text(t),$("#cantidadProductos a").attr("href","/carrito/")):($("#cart_count").text(t),$("#cart_count2").text(t),$("#cantidadProductos a").attr("href","#"))},beforeSend:function(){$("body").ScrollTo(500),$("#cart_count").text(""),$("#cantidadProductos a").attr("href","#")},error:function(){}}),!1},ajaxLogin=function(){return $.ajax({type:"get",url:"/carrito/procesos/login.php",dataType:"json",cache:!1,success:function(e){console.log(e),ScarabQueue.push(["cart",e.emarcys]),$("#box__login").html("");var t=document.getElementById("box__login");if(!1===e.login){var a=document.createElement("dl");a.setAttribute("class","logIn");u=document.createElement("dt");(m=document.createElement("a")).setAttribute("class","btn-rojo"),m.href="/mi-cuenta/iniciar-sesion/";p=document.createTextNode("Ingresar");m.appendChild(p);var n=document.createElement("dd"),o=document.createElement("p"),r=document.createTextNode("¿Eres Nuevo?");o.appendChild(r);var i=document.createElement("a");i.setAttribute("class","btn-azul"),i.href="/registrate/";var c=document.createTextNode("Regístrate");u.appendChild(m),a.appendChild(u),i.appendChild(c),n.appendChild(o),n.appendChild(i),a.appendChild(n),t.appendChild(a)}else{ScarabQueue.push(["setEmail",e.email]);var d=document.getElementById("userInformation"),s="<span>Bienvenido</span>"+e.username;d.innerHTML="",d.innerHTML=s;var l=document.createElement("dl"),u=document.createElement("dt"),m=document.createElement("a");m.href="/mi-cuenta/";var p=document.createTextNode("Entrar a mi cuenta");m.appendChild(p),u.appendChild(m);var v=document.createElement("dt"),g=document.createElement("a");g.href="/mi-cuenta/mis-pedidos/";var f=document.createTextNode("Revisar mis pedidos");g.appendChild(f),v.appendChild(g),l.appendChild(u),l.appendChild(v);var h=document.createElement("dl");h.setAttribute("class","logOut"),h.setAttribute("style","display: block !important;");var b=document.createElement("dt"),y=document.createElement("p"),_=document.createTextNode("¿ No eres "+e.username+" ?");y.appendChild(_);var E=document.createElement("a");E.href="/mi-cuenta/cerrar-sesion/";var C=document.createTextNode("Cerrar mi session");E.appendChild(C),b.appendChild(y),b.appendChild(E),h.appendChild(b),t.appendChild(l),t.appendChild(h)}ScarabQueue.push(["go"])},beforeSend:function(){if($("#box__login").is(":empty")){var e=document.getElementById("box__login"),t=document.createElement("dl");t.setAttribute("class","logIn");var a=document.createElement("dd"),n=document.createElement("p"),o=document.createTextNode("¡Estamos validando tu acceso!");n.appendChild(o),a.appendChild(n),t.appendChild(a),e.appendChild(t)}},error:function(){}}),!1},validateForm=function(e){var t=!1;return""!==e.email.value&&""!==e.contrasena.value&&(t=!0),t},formularioProducto=function(e){return e.comprar.classList.add("active"),e.comprar.setAttribute("disabled","disabled"),!0},carritoLoader=function(){var e={};$.ajax({type:"post",url:"/carrito/procesos/?a=99&ajax=1",dataType:"json",cache:!1,data:e,success:function(e){var t=parseInt(e);t>0?($("#cart_count").text(t),$("#cantidadProductos a").attr("href","/carrito/")):($("#cart_count").text(t),$("#cantidadProductos a").attr("href","#"))},error:function(){}}),ajaxLogin()},subastaLoader=function(){$("#subastaContent").html("");return $.ajax({type:"post",url:"/subasta/ajax/",cache:!1,dataType:"json",success:function(e){if(e&&e.id_subasta>0){var t=document.getElementById("subastaContent"),a=document.getElementById("subastaContent2");t.innerHTML="",a.innerHTML="";var n='<h3>Oferta Actual</h3><div data-fechafin="'+e.fecha_final+'" class="counter"><div id="countdown"><div class="dash days_dash"><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="dash_title">Dias.</div></div><div class="dash hours_dash"><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="dash_title">Hrs.</div></div><div class="dash minutes_dash"><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="dash_title">Min.</div></div><div class="dash seconds_dash"><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="dash_title">Seg.</div></div></div></div><div class="productSub"><div class="contImg"><img src="'+e.foto[0].Foto+'"></div><div class="contProd"><form action="'+decodeURIComponent(base_path+"subasta/"+e.id_subasta+"/"+e.seo+"/")+'" name="frmPujaPop" id="frmPujaPop" method="post" ><dl><dt>'+e.nombre_subasta+"</dt></dl><p>Mínimo a ofertar<strong>$"+parseInt(e.precio_inicial)+'</strong></p><div class="ofertar">';!1===e.login?n+='<label>$</label><input type="number" value="'+(parseInt((parseInt(e.precio_maximo)+parseInt(e.precio_inicial))/2)+10)+'"><a href="/mi-cuenta/iniciar-sesion/?r=s&next='+encodeURIComponent("subasta/"+e.id_subasta+"/"+e.seo+"/")+'" class="btn-rojo">Ofertar</a>':n+='<label>$</label><input name="id" type="hidden" value="'+e.id_subasta+'"><input min="'+parseInt(e.precio_inicial)+'" max="'+parseInt(e.precio_maximo)+'" type="number" value="'+parseInt((parseInt(e.precio_maximo)+parseInt(e.precio_inicial))/2)+'" name="cantidad" id="cantidad"><a onclick="return launchSubasta();" class="btn-rojo">Ofertar</a>',n+="</div></form><a href=\"/subastas/\" class=\"link\">Ver todas las subastas</a></div></div><div class='productUrl'><div class='guias'><p>¿Quieres aprender a subir sus subastas?</p><a href='/subastas/guia/'>Ver guia de subastas</a></div></div>",t.innerHTML=n,a.innerHTML=n,timeSubasta()}},beforeSend:function(){$("#subastaContent").append('<img class="subastaLoader" src="/css/img/barra_cargador.gif" width="80" alt="" />')},error:function(){}}),!1};$(document).ready(function(){$(".subastas").mouseover(function(){$("#subastaContent").html().length>0||subastaLoader()})});var launchSubasta=function(){document.forms.frmPujaPop.submit()},editarDir=function(e){loading(!0),parseInt(e)>0&&$.ajax({url:"procesos/obtenerDireccionAjax/",type:"GET",async:!1,dataType:"JSON",data:{iddir:e},success:function(e){$(".agrDireccion").fadeIn("fast"),document.getElementById("id_dir").value=e.id,document.getElementById("nombre").value=e.nombre+" "+e.apellido_paterno+" "+e.apellido_materno,document.getElementById("celular").value=e.celular,document.getElementById("cpostal").value=e.cp,document.getElementById("num_ext").value=e.num_ext,document.getElementById("num_int").value=e.num_int,document.getElementById("direccion").value=e.direccion,document.getElementById("entreCalles").value=e.entre_calles1,document.getElementById("entreCalles2").value=e.entre_calles2,document.getElementById("observaciones").value=e.observaciones,document.getElementById("estado").value=e.estado,$("#estado").removeAttr("disabled");var t="<option value='"+e.municipio+"'>"+e.municipio+"</option>";$("#municipio").html(""),$("#municipio").html(t),$("#municipio").removeAttr("disabled"),$("#coloniaContainer span").remove(),$("#colonia").remove(),$("#coloniaContainer").append("<span class=\"select\"><select name='colonia' onchange='removeContainer(this);' id='colonia' required='required'></select></span>");var a="<option value='"+e.colonia+"'>"+e.colonia+"</option>";$("#colonia").html(""),$("#colonia").html(a),$("#colonia").removeAttr("disabled"),document.getElementById("ciudad").value=e.ciudad,$("#ciudad").removeAttr("disabled"),loading(!1),window.location.hash="#anclaDireccion"},error:function(e,t,a){loading(!1),alert("Te invitamos a comunicarte con nosotros, o crear una nueva direccion de envio por favor")}})},resetDireccion=function(){loading(!0),$(".agrDireccion").fadeOut("fast"),document.getElementById("id_dir").value="",document.getElementById("nombre").value="",document.getElementById("celular").value="",document.getElementById("cpostal").value="",document.getElementById("direccion").value="",document.getElementById("entreCalles").value="",document.getElementById("entreCalles2").value="",document.getElementById("observaciones").value="";$("#estado").html(""),$("#estado").html("<option value=''>Selecciona uno</option>"),$("#estado").attr("disabled","disabled");$("#municipio").html(""),$("#municipio").html("<option value=''>Verifica tu CP</option>"),$("#municipio").attr("disabled","disabled");$("#colonia").html(""),$("#colonia").html("<option value=''>Verifica tu CP</option>"),$("#colonia").attr("disabled","disabled"),document.getElementById("ciudad").value="",$("#ciudad").attr("disabled","disabled"),loading(!1)},validarFormulario=function(e){loading(!0);var t=!1;x=document.getElementsByClassName("erroresEmergen");var a=recorrerFormulario(e);$.inArray(0,validateForm(a))<0&&(t=!0);for(n=0;n<x.length;n++)x[n].style.display="none";if(t){for(n=0;n<x.length;n++)x[n].style.display="none"}else{var n;for(n=0;n<x.length;n++)x[n].style.display="block";loading(!1)}return t},validateElement=function(e,t){var a=0,n=document.getElementById(e.name);switch(e.value.trim().length>0?(a=1,n.className=""):(a=0,n.className="error",t||n.focus()),n.getAttribute("data-validate")){case"email":a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n.value);break;case"tarjeta":o=n.value;!0===(l=/^[0-9]{15,16}$/).test(o)?(a=1,n.className=""):(a=0,n.className="error");break;case"tarjetaSears":o=n.value;!0===(l=/^[0-9]{12,13}$/).test(o)?(a=1,n.className=""):(a=0,n.className="error");break;case"cvv":var o=n.value;!0===(l=/^[0-9]{3,4}$/).test(o)?(a=1,n.className=""):(a=0,n.className="error");break;case"cp":var r=n.value;!0===(l=/^[0-9]{5}$/).test(r)?(a=1,n.className=""):(a=0,n.className="error");break;case"telefono":var i=n.value;!0===(l=/^[0-9]{10}$/).test(i)?(a=1,n.className=""):(a=0,n.className="error");break;case"celular":var c=n.value;!0===(l=/^[0-9]{10}$/).test(c)?(a=1,n.className=""):(a=0,n.className="error");break;case"transfer":var d=n.value;!0===(l=/^[0-9]{12}$/).test(d)?(a=1,n.className=""):(a=0,n.className="error");break;case"securePass":var s=n.value.trim(),l=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/;!0===l.test(s)?(a=1,n.className=""):(a=0,n.className="error")}return a},validateForm=function(e){var t,a=!1,n=new Array;for(n.push(1),t=0;t<e.length;++t)if(!0===e[t].attr){var o=validateElement(e[t],a);!1===o&&(a=!0),n.push(o)}return n},recorrerFormulario=function(e){var t=[],a=document.getElementById(e);for(i=0;i<a.elements.length;i++){var n={};n.name=a.elements[i].name,n.value=a.elements[i].value,n.attr=a.elements[i].required,t.push(n)}return t},mostrarForm=function(e){$(".agrDireccion").fadeIn("fast"),emptyForm(e),window.location.hash="#anclaDireccion"},emptyForm=function(e){var t=document.getElementById(e);for(i=0;i<t.elements.length;i++)t.elements[i].value="",!0===t.elements[i].required&&(t.elements[i].className="");return!1},resumenPago=function(e){var t="";t={idform:e.id.split("_")[1],bim:""},$.ajax({type:"POST",url:"/caja/forma-pago/ajax.php",dataType:"JSON",data:t,beforeSend:function(){},success:function(e){datosPago(e)}})},pagoCheckout=function(e,t){if(e>0&&""!==t){var a={idform:e,bim:t.substring(0,6)};$.ajax({type:"POST",url:"/caja/forma-pago/ajax.php",dataType:"JSON",data:a,beforeSend:function(){},success:function(e){datosPago(e)}})}},validateFormaPago=function(e){if($("#delpsearsysanb").val()>0)return document.getElementById("productosAgotadosError").style.display="block",!1;var t=$("input[name=forma_pago]:checked","#"+e).val();return void 0!==t&&("paypal"===t&&loadingPaypal(!0),window.location.href="/caja/"+t),!1},validateFormaPagoMultienvios=function(e){if($("#delpsearsysanb").val()>0)return document.getElementById("productosAgotadosError").style.display="block",!1;var t=$("input[name=forma_pago]:checked","#"+e).val();return void 0!==t&&("paypal"===t&&loadingPaypal(!0),window.location.href="/caja/multienvios/"+t),!1},validateFormaPagoOxxo=function(e){var t=document.querySelector('input[name="'+e+'"]:checked').value;return""!==t&&(window.location.href="/caja/revisar/procesos/?a=pagar_pedido&r=&formaPago="+t),!1},validarFormaDeposito=function(e){var t=document.querySelector('input[name="'+e+'"]:checked').value;return""!==t&&(window.location.href="/caja/revisar/procesos/?a=pagar_pedido&r=&formaPago=deposito&banco="+t),!1},validateFormaPagoOxxoMultiDir=function(e){var t=document.querySelector('input[name="'+e+'"]:checked').value;return""!==t&&(window.location.href="/caja/multienvios/dineromail/procesar.php?pago="+t),!1},validateFormaPagoPaypal=function(e){return window.location.href="/caja/paypal/process/",!0},forceSubmit=function(e){return $("#"+e).submit(),!1},card=function(e){e.length>=6?$.post("bancomer_checker.php",{bim:e.substring(0,6)},function(e){$("#msi_html").html(e)}):$("#msi_html").html("")},telmexValidate=function(e){return validarFormulario(e.id)},tarjetaSelect=function(e){loading(!0);var t={tarjeta:e};switch($(".imgs_pago.imgp_formulario img").removeClass("selected"),e){case"4384":$(".imgs_pago.imgp_formulario img:eq(0)").addClass("selected");break;case"4379":$(".imgs_pago.imgp_formulario img:eq(1)").addClass("selected")}$.ajax({url:"/caja/tarjetas-departamentales/tarjeta.php",type:"post",dataType:"json",async:!0,data:t,success:function(e){var t=document.getElementById("tc_sears"),a=document.getElementById("tipo-pago");for(t.style.display="block",i=0;i<e.valor.length;i++){var n=document.createElement("option");n.setAttribute("value",e.valor[i].id);var o=document.createTextNode(e.valor[i].nombre);n.appendChild(o),a.appendChild(n)}validarPromocion(a.value),loading(!1)},beforeSend:function(){$("#tipo-pago").html("")}})},meses=function(e,t){if(""!==e){$.ajax({url:"/caja/tarjetas-departamentales/meses.php",type:"post",dataType:"json",async:!1,data:{idFormaPago:e,msi:t},success:function(e){}})}},general=function(e){if(""!==e){$.ajax({url:"/caja/tarjetas-departamentales/ajax.php",type:"post",dataType:"json",async:!1,data:{idFormaPago:e},success:function(e){}})}},sears=function(e){if(""!==e)switch(e){case"1":general(4384);break;case"2":meses(4384,15);break;case"3":meses(4385,"")}return!0},validarPromocion=function(e){loading(!0);var t={fpago:e};$.ajax({url:"/caja/tarjetas-departamentales/promocion.php",type:"post",dataType:"html",async:!1,data:t,success:function(e){$("#promocion").html(e)},beforeSend:function(){$("#promocion").html("")}}),loading(!1)},validaLoginTelmex=function(){$("#msjRT").removeClass("active"),$("#errorTelmex").html("");var e=!0,t=$("#usuario2").val(),a=$("#nombre").val(),n=$("#direccion").val(),o=$("#ap_paterno").val(),r=$("#ap_materno").val(),i=$("#colonia").val(),c=$("#municipio").val(),d=$("#estado").val(),s=$("#ciudad").val(),l=$("#codigopostal").val();""==t.trim()&&(e=!1),""==a.trim()&&(e=!1),""==o.trim()&&(e=!1),""==r.trim()&&(e=!1),""==n.trim()&&(e=!1),""==i.trim()&&(e=!1),""==c.trim()&&(e=!1),""==d.trim()&&(e=!1),""==s.trim()&&(e=!1),""==l.trim()&&(e=!1),e?t.match(/^[0-9]+$/)&&parseInt(t)>0&&10===t.length?($("#opcion_tmx").val(1),$("#formulario").submit()):($("#errorTelmex").html("Verifique su número telefónico."),$("#msjRT").addClass("active")):($("#errorTelmex").html("Información incorrecta ó vacia."),$("#msjRT").addClass("active"))},validaLoginMiTelmex=function(){$("#msjRT").removeClass("active"),$("#errorMiTelmex").html("");var e=$("#usuario").val(),t=$("#contrasena").val();e.match(/^[0-9]+$/)&&t.match(/^[a-zA-Z0-9\s\S]{4,8}$/)?parseInt(e)>0&&10===e.length?($("#opcion_tmx").val(2),$("#formulario").submit()):($("#errorMiTelmex").html("Verifique su número telefónico."),$("#msjRT").addClass("active")):($("#errorMiTelmex").html("Información incorrecta ó vacia."),$("#msjRT").addClass("active"))},validaMembresiaPuntossinfin=function(){$("#msjRT").removeClass("active"),$("#errorMiTelmex").html("");var e=$("#usuario").val();$("#contrasena").val();parseInt(e)>0&&e.length>1?$("#formulario").submit():($("#errorMiTelmex").html("Verifique su mebresia."),$("#msjRT").addClass("active"))};$(".queEsPS").fancybox({maxWidth:600,minHeight:340,maxHeight:400,type:"iframe",fitToView:!1,width:"100%",height:"100%",autoSize:!0,closeClick:!0,padding:0,openEffect:"none",closeEffect:"none"});var recarga=function(){$("#various5").fancybox({width:"98%",height:"98%",scrolling:"yes",autoScale:!0,autoDimensions:!0,type:"iframe"})},tallaSegunColor=function(){loading(!0),console.log("Cambiando color"),$colorSelected=$("#color").val(),$("#talla").attr("disabled",!1),$("#talla").find("option").remove().end().append('<option value="" disabled="">Seleccionar</option>').val(""),""!==$colorSelected?$.each(tallas_porColor[$colorSelected],function(e,t){$("#talla").append($("<option>",{value:t.tsize+"|"+t.stock+"|"+t.id,text:t.tsize}))}):$("#talla").attr("disabled",!0),loading(!1)},CambioPrecio=function(e,t){var a={productoId:e,talla:t.value};$.ajax({url:"/carrito/procesos/FancyComboTalla.php",type:"post",dataType:"json",async:!1,data:a,success:function(e){var t=document.getElementById("precioCambio");t.innerHTML="";var a=document.createTextNode("$ "+e.precio+" "),n=document.createElement("span"),o=document.createTextNode("MXN");n.appendChild(o),t.appendChild(a),t.appendChild(n),loading(!1)},beforeSend:function(){loading(!0)},error:function(){loading(!1)}})},validateDireccion=function(e){var t={direccion:e};$.ajax({url:"/caja/direccion-envio/procesos/validate.php",type:"post",dataType:"JSON",async:!1,data:t,success:function(t){if(!0===t.status)if(!0===t.control)window.location="/caja/direccion-envio/procesos/?a=1&id="+e;else{loading(!1),document.getElementById("direccionError").style.display="block";document.getElementById("direccionMensajeError").innerHTML="Tenemos datos faltantes para procesar tu dirección, ayudanos a completarlos",editarDir(e)}else alert("Te invitamos a usar otra direccion de envio"),window.location.reload()},beforeSend:function(){loading(!0)},error:function(e,t,a){loading(!1),alert("Te invitamos a comunicarte con nuestros, o crear una nueva direccion de envio por favor")}})},addOneclic=function(e){oneclick(),trackfb(e),loading(!0);var t=document.getElementById(e),a=document.createElement("input");return a.type="hidden",a.name="onclick",a.id="onclick",a.value=!0,t.appendChild(a),$("#comprar").trigger("click"),!0},anclas=function(e){posicion=$("#"+e).position().top-100,$(window).scrollTop(posicion)},cambiarCantidad=function(e,t){for(var a=new Array,n="",o=document.getElementsByTagName("select"),r=0;r<o.length;r++){var i=o[r],c=i.name.split("_");if("cantidad"===c[0]){var d=parseInt(i.value);if(n=c[1],null===(m=functiontofindIndexByKeyValue(a,"id",n))){var s={id:n,cantidad:0};a.push(s)}a[m=functiontofindIndexByKeyValue(a,"id",n)].cantidad=a[m].cantidad+d}}for(r=0;r<t.length;r++){var l=document.getElementById("nomreDir_"+t[r].id),u=document.getElementById("agregDir_"+t[r].id),m=functiontofindIndexByKeyValue(a,"id",t[r].id);t[r].cantidad===a[m].cantidad?(l.style.display="block",u.style.display="none"):(l.style.display="none",u.style.display="block")}},validarCarrito=function(e){for(var t=!1,a=new Array,n=new Array,o="",r=document.getElementsByTagName("select"),i=0;i<r.length;i++){var c=r[i],d=c.name.split("_");if("cantidad"===d[0]){var s=parseInt(c.value);if(o=d[1],null===(u=functiontofindIndexByKeyValue(n,"id",o))){var l={id:o,cantidad:0};n.push(l)}n[u=functiontofindIndexByKeyValue(n,"id",o)].cantidad=n[u].cantidad+s}}for(i=0;i<e.length;i++){var u=functiontofindIndexByKeyValue(n,"id",e[i].id),m=document.getElementById("nomreDir_"+e[i].id),p=document.getElementById("agregDir_"+e[i].id);e[i].cantidad===n[u].cantidad?(a.push(1),m.style.display="block",p.style.display="none"):(a.push(0),m.style.display="none",p.style.display="block")}return $.inArray(0,a)<0&&(t=!0),loading(!1),t},addMultienvio=function(e,t,a){document.getElementById("multiE_single_"+e);for(var n=document.getElementById("multiE_cantidad_"+e),o=document.getElementById("multiE_enviar_"+e),r=n.getElementsByTagName("select"),i=0,c=0;c<r.length;c++){var d=r[c].name.split("_"),s=parseInt(d[2]);i<s&&(i=s)}var l=document.createElement("select");l.setAttribute("id","cantidad_"+e+"_"+(s+1)),l.setAttribute("name","cantidad_"+e+"_"+(s+1)),l.setAttribute("onchange","cambiarCantidad(this,carroOriginal)");var u=functiontofindIndexByKeyValue(t,"id",e);if(0===u)(m=document.createElement("option")).setAttribute("value","1"),m.text="1",l.appendChild(m);else for(c=1;c<t[u].cantidad;c++){var m=document.createElement("option");m.setAttribute("value",c),m.text=c,l.appendChild(m)}var p=document.createElement("select");p.setAttribute("id","direccion_"+e+"_"+(s+1)),p.setAttribute("name","direccion_"+e+"_"+(s+1)),p.setAttribute("required","required"),p.setAttribute("onchange","return validarMultiDireccion(this);");for(c=0;c<a.length;c++)(v=document.createElement("option")).setAttribute("value",a[c].id),v.text=a[c].direccion,p.appendChild(v);var v=document.createElement("option");v.setAttribute("value",""),v.text="Agregar una nueva dirección",p.appendChild(v),n.appendChild(l),o.appendChild(p),validarCarrito(t)},validarMultiDireccion=function(e){return""===e.value&&$.fancybox.open({href:"/caja/direccion-envio/iframe.php",type:"iframe",closeBtn:!0}),!0},addAddress=function(e){var t=$("#agregarDireccion"),a=getFormData(t);return $.ajax({url:"/caja/direccion-envio/procesos/agregar/",type:"post",dataType:"JSON",async:!1,data:a,success:function(e){window.top!=window.self?(window.parent.$.fancybox.close(),window.parent.location.reload()):window.history.back()},beforeSend:function(){loading(!0)},error:function(e,t,a){loading(!1),alert("Te invitamos a comunicarte con nuestros, o crear una nueva direccion de envio por favor")}}),!1},direccionPredeterminada=function(e){var t={id:e};$.ajax({url:"/caja/direccion-envio/procesos/direccionPredeterminada/",type:"post",dataType:"JSON",async:!1,data:t,success:function(e){window.location.reload()},beforeSend:function(){loading(!0)},error:function(e,t,a){loading(!1),alert("Te invitamos a comunicarte con nuestros, o crear una nueva direccion de envio por favor")}})},popupCarrito=function(e){var t=validarFormulario(e);return loading(!1),console.log(t),t?loading(!0):alertaGenerica("talla/color"),t},trackfb=function(e){var t=document.getElementById(e),a="['"+t.elements.id.value+"']",n=t.elements.nombre.value,o=t.elements.categoria.value,r=t.elements.precio.value;return fbq("track","AddToCart",{content_name:n,content_category:o,content_ids:a,content_type:"product",value:r,currency:"MXN"}),!0},addCart=function(e){var t=popupCarrito(e),a=document.getElementById(e).elements.id.value;if(t){agregarProductoCarrito(),trackfb(e);var n=$("#"+e).serializeObject();n.ajax=1;$.ajax({url:"/carrito/procesos/",type:"get",dataType:"JSON",async:!1,data:n,success:function(e){$("#cart_count").text(e),$("#cantidadProductos a").attr("href","/carrito/"),loading(!1),fancyCarrito(),addCartRec(!0,a)},beforeSend:function(){loading(!0)},error:function(e,t,a){loading(!1),alert("Te invitamos a comunicarte con nuestros, o crear una nueva direccion de envio por favor")}})}},addCartRecomendaciones=function(e){var t=document.getElementById("agregarRecomendaciones"),a=document.createElement("div");a.setAttribute("class","sliderEmarsys");var n=document.createElement("div");n.setAttribute("id","topic1"),n.setAttribute("class","personal-recs");var o=document.createElement("div");o.setAttribute("id","topic2"),o.setAttribute("class","personal-recs");var r=document.createElement("div");r.setAttribute("id","topic3"),r.setAttribute("class","personal-recs");var i=document.createElement("div");i.setAttribute("id","topic4"),i.setAttribute("class","personal-recs");var c=document.createElement("div");c.setAttribute("id","topic5"),c.setAttribute("class","personal-recs");var d=document.createElement("div");d.setAttribute("id","topic6"),d.setAttribute("class","personal-recs"),a.appendChild(n),a.appendChild(o),a.appendChild(r),a.appendChild(i),a.appendChild(c),a.appendChild(d),t.appendChild(a);for(var s=1;s<7;s++)ScarabQueue.push(["recommend",{logic:"TOPICAL_"+s,limit:1,containerId:"topic"+s,templateId:"simple-tmpl",success:function(e,t){e.topic&&t(e)}}]);e&&ScarabQueue.push(["go"])},addCartRec=function(e,t){var a=document.getElementById("agregarRecomendaciones"),n=document.createElement("div");n.setAttribute("class","sliderEmarsys");var o=document.createElement("div");o.setAttribute("id","topical11"),o.setAttribute("class","personal-recs"),o.setAttribute("style","display:flex;");var r=document.createElement("div");r.setAttribute("id","topical12"),r.setAttribute("class","personal-recs"),r.setAttribute("style","display:flex;"),n.appendChild(o),n.appendChild(r),a.appendChild(n),ScarabQueue.push(["view",t]),ScarabQueue.push(["recommend",{logic:"ALSO_BOUGHT",containerId:"topical11",templateId:"simple-tmpl",limit:4,success:function(e,t){t(e)}}]),e&&ScarabQueue.push(["go"]),ScarabQueue.push(["view",t]),ScarabQueue.push(["recommend",{logic:"CART",containerId:"topical12",templateId:"simple-tmpl",limit:6,success:function(e,t){t(e)}}]),e&&ScarabQueue.push(["go"])},fancyCarrito=function(){$(".btn-carrito").fancybox({titlePosition:"inside",transitionIn:"none",transitionOut:"none",onComplete:ajaxCarritoSolo()})},mySuccessHandler=function(e,t){for(var a=0,n=e.page.products.length;a<n;a++){var o=e.page.products[a];o.precio=o.price.toLocaleString("en"),o.msrp_sub=o.msrp.toLocaleString("en"),o.categoria1=o.category}e.title="Videojuegos",t(e)},showCategoryEmarsys=function(e,t,a,n){ScarabQueue.push(["category",n]),ScarabQueue.push(["recommend",{logic:"CATEGORY",containerId:t,templateId:a,limit:40,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},showCategoryEmarsysHome=function(e){var t=document.getElementById("carruselCatEmarsys"),a=document.createElement("h2");a.setAttribute("class","celulares"),a.innerHTML="Videojuegos";var n=document.createElement("div");n.setAttribute("id","topical9"),n.setAttribute("class","carruselProd js__slider5"),t.appendChild(a),t.appendChild(n),ScarabQueue.push(["category","videojuegos"]),ScarabQueue.push(["recommend",{logic:"CATEGORY",limit:10,containerId:"topical9",templateId:"simple-tmpl-carrusel",success:mySuccessHandler}]),e&&ScarabQueue.push(["go"]);var o=document.getElementById("carruselCatEntreDeportes"),r=document.createElement("h2");r.setAttribute("class","celulares"),r.innerHTML="Juguetes y Deportes";var i=document.createElement("div");i.setAttribute("id","topical10"),i.setAttribute("class","carruselProd js__slider5"),o.appendChild(r),o.appendChild(i),ScarabQueue.push(["category","juguetes | deportes"]),ScarabQueue.push(["recommend",{logic:"CATEGORY",limit:10,containerId:"topical10",templateId:"simple-tmpl-carrusel",success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},eventosDatalayer={};!function(e){e.Categoria=function(e,t){dataLayer.push({idCategoria:e,ecomm_pagetype:"category",ecomm_category:t})},e.Producto=function(e,t,a){dataLayer.push({idProducto:e,precioProducto:t,categoria:a,ecomm_pagetype:"product",ecomm_prodid:e,ecomm_totalvalue:t,ecomm_category:a})},e.Carrito=function(e,t){dataLayer.push({idProducto:e,totalCarrito:t,ecomm_pagetype:"cart",ecomm_prodid:e,ecomm_totalvalue:t})},e.Checkout=function(e){dataLayer.push({idProducto:e})},e.Purchase=function(e,t,a){dataLayer.push({idProducto:e,totalCarrito:a,ecomm_pagetype:"purchase",ecomm_prodid:e,ecomm_totalvalue:a})}}(eventosDatalayer);